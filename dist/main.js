/*! For license information please see main.js.LICENSE.txt */
(()=>{var __webpack_modules__={"./src/scss/base.scss":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://bookshop/./src/scss/base.scss?")},"./src/app.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _scss_base_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scss/base.scss */ "./src/scss/base.scss");\n/* harmony import */ var _js_slider_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/slider.js */ "./src/js/slider.js");\n/* harmony import */ var _js_slider_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_js_slider_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _js_request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./js/request.js */ "./src/js/request.js");\n/* harmony import */ var _js_categories_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./js/categories.js */ "./src/js/categories.js");\n/* harmony import */ var _js_cart_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./js/cart.js */ "./src/js/cart.js");\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://bookshop/./src/app.js?')},"./src/js/cart.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"initCartButtons\": () => (/* binding */ initCartButtons)\n/* harmony export */ });\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tools.js */ \"./src/js/tools.js\");\n\nconst cartHeader = document.getElementById('books-in-cart');\n\nfunction initCartButtons() {\n    const addCardButtons = document.querySelectorAll('#add-remove-cart');\n    console.log(localStorage);\n\n    if (localStorage.length == 0) localStorage.setItem('booksInCart', '');\n\n    addCardButtons.forEach(button => {\n        const currentBookId = button.closest('.book-item').dataset.index;\n        let checkBookInCard = false;\n        let booksInCart = localStorage.getItem('booksInCart');\n        if (booksInCart != '') {\n            booksInCart.split(',').forEach((element, index) => {\n                if (element == currentBookId) checkBookInCard = true;\n\n            });\n\n            if (checkBookInCard) {\n                button.classList.add('remove-cart-button');\n                button.textContent = 'in the cart';\n            }\n        }\n\n        button.addEventListener('click', (e) => {\n\n            const currentBookId = e.target.closest('.book-item').dataset.index;\n\n            let checkBookInCard = false;\n            let booksInCart = localStorage.getItem('booksInCart');\n            booksInCart.split(',').forEach((element, index) => {\n                if (element == currentBookId) checkBookInCard = true;\n            });\n\n            if (checkBookInCard) {\n\n                console.log('---------');\n                console.log('  ' + typeof(booksInCart));\n                console.log('  >' + booksInCart + '<');\n                booksInCart = booksInCart.replace('X8KlDwAAQBAJ', '');\n                console.log('  >' + booksInCart + '<');\n                localStorage.setItem('booksInCart', booksInCart);\n                console.log('---------');\n\n                e.target.classList.remove('remove-cart-button');\n                button.textContent = 'buy now';\n\n                reloadCartHeader();\n\n                console.log('remove');\n                console.log(localStorage);\n            } else {\n                if (booksInCart == '') booksInCart = currentBookId;\n                else booksInCart += ',' + currentBookId;\n                localStorage.setItem('booksInCart', booksInCart);\n\n                e.target.classList.add('remove-cart-button');\n                button.textContent = 'in the cart';\n\n                reloadCartHeader();\n\n                console.log('add');\n                console.log(localStorage);\n            }\n\n\n        });\n    });\n}\n\nfunction reloadCartHeader() {\n    const booksInCartCount = localStorage.getItem('booksInCart');\n    if (booksInCartCount == '') cartHeader.style.display = 'none';\n    else cartHeader.style.display = 'flex';\n    cartHeader.textContent = booksInCartCount.split(',').length;\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    reloadCartHeader();\n});\n\n//# sourceURL=webpack://bookshop/./src/js/cart.js?")},"./src/js/categories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./request.js */ \"./src/js/request.js\");\n\n\nconst categoriesData = [{\n        name: 'Architecture',\n        subject: 'Architecture'\n\n    },\n    {\n        name: 'Art & Fashion',\n        subject: 'Art'\n    },\n    {\n        name: 'Biography',\n        subject: 'Biography & Autobiography'\n    },\n    {\n        name: 'Business',\n        subject: 'Business'\n    },\n    {\n        name: 'Crafts & Hobbies',\n        subject: 'Crafts & Hobbies'\n    },\n    {\n        name: 'Drama',\n        subject: 'Drama'\n    },\n    {\n        name: 'Fiction',\n        subject: 'Fiction'\n    },\n    {\n        name: 'Food & Drink',\n        subject: 'Cooking'\n    },\n    {\n        name: 'Health & Wellbeing',\n        subject: 'Health & Fitness'\n    },\n    {\n        name: 'History & Politics',\n        subject: 'History',\n    },\n    {\n        name: 'Humor',\n        subject: 'Humor'\n    },\n    {\n        name: 'Poetry',\n        subject: 'Poetry'\n    },\n    {\n        name: 'Psychology',\n        subject: 'Psychology'\n    },\n    {\n        name: 'Science',\n        subject: 'Science'\n    },\n    {\n        name: 'Technology',\n        subject: 'Technology'\n    },\n    {\n        name: 'Travel & Maps',\n        subject: 'Travel'\n    }\n];\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    const categoriesListElement = document.getElementById('categories');\n    categoriesData.forEach((item, index) => {\n        let listElement = document.createElement('li');\n        if (index == 0) {\n            listElement.classList.add('active');\n        }\n        let buttonElement = document.createElement('button');\n        buttonElement.textContent = item.name;\n        buttonElement.dataset.index = index;\n        \n        buttonElement.addEventListener('click', (event) => {\n            (0,_request_js__WEBPACK_IMPORTED_MODULE_0__.request)(item.subject);\n\n            categoriesListElement.querySelector('.active').classList.remove('active');\n            console.log(event.target);\n            console.log(event.target.closest('li'));\n            event.target.closest('li').classList.add('active');\n        });\n\n        listElement.appendChild(buttonElement);\n        categoriesListElement.appendChild(listElement);\n    });\n});\n\n//# sourceURL=webpack://bookshop/./src/js/categories.js?")},"./src/js/request.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "request": () => (/* binding */ request)\n/* harmony export */ });\n/* harmony import */ var _tools_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tools.js */ "./src/js/tools.js");\n/* harmony import */ var _cart_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cart.js */ "./src/js/cart.js");\n\n\n\nfunction url(key, subject) {\n    return `https://www.googleapis.com/books/v1/volumes?q="subject:${subject}"&key=${key}&printType=books&startIndex=0&maxResults=6&langRestrict=en`;\n}\nconst key = \'AIzaSyDQUaZUwEvbjQxO8awYggZPzgolT9-YNAw\';\nconst spinner = document.getElementById(\'spinner\');\nconst catalog = document.getElementById(\'catalog\');\n\nconst spinnerElement = `\n<div class="catalog-spinner-block" id="spinner">\n    <svg class="catalog-spinner" viewBox="0 0 50 50">\n        <circle class="path" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle>\n    </svg>\n</div>\n`;\n\nfunction createBook(bookInfo) {\n    const bookId = bookInfo.id;\n    bookInfo = bookInfo.volumeInfo;\n\n    let cover = \'\';\n    if (bookInfo.imageLinks && bookInfo.imageLinks.thumbnail) cover = `<img class="cover" src="${bookInfo.imageLinks.thumbnail}" alt="Book cover">`;\n    else cover = \'<div class="no-cover">The cover is missing</div>\';\n\n    let rating = \'\';\n    if (bookInfo.averageRating) {\n        rating = `${_tools_js__WEBPACK_IMPORTED_MODULE_0__.ratingStars(bookInfo.averageRating)} <span>${bookInfo.ratingsCount} review</span>`;\n    } else rating = \'<span>There is no rating</span>\';\n\n    let price = \'\';\n    if (bookInfo.saleInfo && bookInfo.saleInfo.retailPrice) {\n        price = `<span class="price">${_tools_js__WEBPACK_IMPORTED_MODULE_0__["getСurrency"](bookInfo.saleInfo.retailPrice.currencyCode)}${toString(bookInfo.saleInfo.retailPrice.amount)}</span>`;\n    } else price = \'<span class="price-not">Price not specified</span>\';\n\n    return `\n    <div class="book-item" data-index="${bookId}">\n        ${cover}\n        <div class="info">\n            <span class="author">${bookInfo.authors ? bookInfo.authors : \'Unknown author\'}</span>\n            <span class="title">${bookInfo.title ? bookInfo.title : \'Unknown book name\'}</span>\n            <div class="rating">${rating}</div>\n            <span class="description">${bookInfo.description ? bookInfo.description : \'Unknown description\'}</span>\n            ${price}\n            <button class="catalog-button" id="add-remove-cart">buy now</button>\n        </div>\n    </div>`;\n}\n\nfunction request(subject) {\n    catalog.innerHTML = spinnerElement;\n    fetch(url(key, subject))\n        .then((response) => { return response.json(); })\n        .then((data) => {\n            catalog.removeChild(document.getElementById(\'spinner\'));\n            render(data.items);\n        })\n        .catch((error) => { console.log(\'error: \' + error); });\n\n    function render(data) {\n        const length = Object.keys(data).length;\n        console.log(data);\n        console.log(\'length: \' + length);\n        let books = \'\';\n        data.forEach((item, index) => {\n            if (index < 6) {\n                books += createBook(item);\n            }\n        });\n\n        catalog.innerHTML += books;\n\n        (0,_cart_js__WEBPACK_IMPORTED_MODULE_1__.initCartButtons)();\n\n        if (length > 6) {\n            \n            let loadButton = document.createElement(\'button\');\n            loadButton.classList.add(\'catalog-button\');\n            loadButton.addEventListener(\'click\', (event) => {\n                event.target.parentElement.parentElement.removeChild(event.target.parentElement);\n                render(data.splice(6));\n            });\n            let loadButtonBlock = document.createElement(\'div\');\n            loadButtonBlock.classList.add(\'load-block\');\n            loadButton.textContent = \'Load more\';\n            loadButtonBlock.appendChild(loadButton);\n            catalog.appendChild(loadButtonBlock);\n        }\n    }\n}\n\n\ndocument.addEventListener(\'DOMContentLoaded\', () => {\n    request(\'Travel\');\n});\n\n//# sourceURL=webpack://bookshop/./src/js/request.js?')},"./src/js/slider.js":()=>{eval("const imagesData = [\n    { 'img': './src/images/banner1.svg' },\n    { 'img': './src/images/banner2.svg' },\n    { 'img': './src/images/banner3.svg' }\n\n];\n\nconst imageBlock = document.getElementById('slider-content');\nconst pointsBlock = document.querySelector('.slider-points');\n\nfunction initSlider() {\n\n    initImagesAndPoint();\n\n    initAutoplay();\n\n    function initImagesAndPoint() {\n\n        imagesData.forEach((image, index) => {\n            let imageElement = document.createElement('img');\n            imageElement.src = image.img;\n            imageElement.className = `slider-image n${index}`;\n            imageElement.dataset.index = index;\n            if (index == 0) {\n                imageElement.classList.add('active');\n            }\n            imageElement.alt = toString(index) + 'slider image';\n            imageBlock.appendChild(imageElement);\n\n            let pointElement = document.createElement('button');\n            pointElement.className = `point n${index}`;\n            if (index == 0) {\n                pointElement.classList.add('active');\n            }\n\n            pointElement.addEventListener('click', event => {\n                const num = event.target.classList[1][1];\n                moveSlide(num);\n            });\n\n            pointsBlock.appendChild(pointElement);\n\n        });\n    }\n\n    function initAutoplay() {\n        setInterval(() => {\n            let currentSlideNumber = +imageBlock.querySelector('.active').dataset.index;\n            moveSlide(currentSlideNumber < 2 ? currentSlideNumber + 1 : 0);\n        }, 5000);\n    }\n\n    function moveSlide(num) {\n        imageBlock.querySelector('.active').classList.remove('active');\n        imageBlock.querySelector(`.n${num}`).classList.add('active');\n\n        pointsBlock.querySelector('.active').classList.remove('active');\n        pointsBlock.querySelector(`.n${num}`).classList.add('active');\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    initSlider();\n});\n\n//# sourceURL=webpack://bookshop/./src/js/slider.js?")},"./src/js/tools.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "getСurrency": () => (/* binding */ getСurrency),\n/* harmony export */   "ratingStars": () => (/* binding */ ratingStars),\n/* harmony export */   "replaceAllInString": () => (/* binding */ replaceAllInString)\n/* harmony export */ });\nfunction getСurrency(code) {\n    switch (code) {\n        case \'RUB\':\n            return \'₽\';\n        default:\n            return code;\n\n    }\n}\n\nfunction ratingStars(rating) {\n    const star = \'./src/images/icons/star.svg\';\n    const starHalfFill = \'./src/images/icons/star_half_fill.svg\';\n    const starFill = \'./src/images/icons/star_fill.svg\';\n\n    let starsCount = 0;\n    let result = \'\';\n\n    for (let i = 0; i < Math.trunc(rating); i++) {\n        result += `<img src="${starFill}" alt="Rating star">`;\n        starsCount++;\n    }\n\n    if (starsCount == 5) return result;\n\n    if (rating % 1 > 0) {\n        result += `<img src="${starHalfFill}" alt="Rating star">`;\n        starsCount++;\n        if (starsCount == 5) return result;\n    }\n\n    for (let i = starsCount; i < 5; i++) {\n        result += `<img src="${star}" alt="Rating star">`;\n        starsCount++;\n    }\n    return result;\n}\n\nfunction replaceAllInString(string, search, replace) {\n    return string.split(search).join(replace);\n}\n\n//# sourceURL=webpack://bookshop/./src/js/tools.js?')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/app.js")})();